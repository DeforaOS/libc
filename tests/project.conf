targets=dlfcn,fnmatch,includes,langinfo,netdb,ptrace,regex,select,setjmp,signal,socket,start,stdint,stdio,string,time,tests.log,unistd
cppflags_force=-nostdinc -isystem ../include -isystem ../include/pthread -isystem ../include/rt
cflags_force=-W
cflags=-Wall -g -O2 -ffreestanding
ldflags_force=-nostdlib -L../src -Wl,-rpath,$(PWD)/../src -lc ../src/start.o
ldflags=`$(CC) -print-libgcc-file-name`
dist=Makefile,tests.sh

[dlfcn]
type=binary
cppflags=-isystem ../include/dl
sources=dlfcn.c

[dlfcn.c]
depends=../src/dl/libdl.a,../src/libc.a,../src/start.o

[fnmatch]
type=binary
sources=fnmatch.c

[fnmatch.c]
depends=../src/libc.a,../src/start.o

[includes]
type=binary
sources=includes.c

[includes.c]
depends=../src/libc.a,../src/start.o

[langinfo]
type=binary
sources=langinfo.c

[langinfo.c]
depends=../src/libc.a,../src/start.o

[netdb]
type=binary
cppflags=-isystem ../include/socket
ldflags=../src/socket/libsocket.a
sources=netdb.c

[netdb.c]
depends=../src/libc.a,../src/socket/libsocket.a,../src/start.o

[ptrace]
type=binary
sources=ptrace.c

[ptrace.c]
depends=../src/libc.a,../src/start.o

[regex]
type=binary
sources=regex.c

[regex.c]
depends=../src/libc.a,../src/start.o

[select]
type=binary
sources=select.c

[select.c]
depends=../src/libc.a,../src/start.o

[setjmp]
type=binary
sources=setjmp.c

[setjmp.c]
depends=../src/libc.a,../src/start.o

[signal]
type=binary
sources=signal.c

[signal.c]
depends=../src/libc.a,../src/start.o

[socket]
type=binary
sources=socket.c
ldflags=../src/socket/libsocket.a

[socket.c]
depends=../src/socket/libsocket.a,../src/libc.a,../src/start.o
cppflags=-isystem ../include/socket

[start]
type=binary
sources=start.c

[start.c]
depends=../src/libc.a,../src/start.o

[stdint]
type=binary
sources=stdint.c

[stdint.c]
depends=../src/libc.a,../src/start.o

[stdio]
type=binary
sources=stdio.c

[stdio.c]
depends=../src/libc.a,../src/start.o

[string]
type=binary
sources=string.c

[string.c]
depends=../src/libc.a,../src/start.o

[time]
type=binary
sources=time.c

[time.c]
depends=../src/libc.a,../src/start.o

[tests.log]
type=script
script=./tests.sh
depends=dlfcn,fnmatch,includes,langinfo,netdb,ptrace,regex,select,setjmp,signal,socket,start,stdint,stdio,string,time,tests.sh,unistd

[unistd]
type=binary
sources=unistd.c
