targets=deforaos-gcc,deforaos-gcc.specs,tracer
cppflags_force=-isystem ../include -DPIC
as=$(CC)
asflags=-W -fPIC -Wall -g -pedantic -ffreestanding -c
cflags_force=-W -fPIC
cflags=-Wall -g -O2 -pedantic -ffreestanding
dist=Makefile,deforaos-gcc.in,deforaos-gcc.specs.in,subst.sh,tracer-analyze.h,tracer-syscalls.h

[deforaos-gcc]
type=script
script=./subst.sh
depends=deforaos-gcc.in,subst.sh,../config.sh
install=$(PREFIX)/bin

[deforaos-gcc.specs]
type=script
script=./subst.sh
depends=deforaos-gcc.specs.in,subst.sh,../config.sh
install=$(PREFIX)/lib/gcc

[tracer]
type=plugin
sources=tracer-analyze.c,tracer-syscalls.S

[tracer-analyze.c]
depends=tracer-syscalls.h,../src/syscalls.h,tracer-analyze.h

[tracer-syscalls.S]
depends=tracer-analyze.h
